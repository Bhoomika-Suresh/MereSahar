/* Reset */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%); min-height:100vh; }

/* ================= NAVBAR ================= */
:root {
  --primary:#0078d7;
  --accent:#ff6b6b;
  --dark:#2d3436;
  --light:#ffffff;
  --header-bg:rgba(255,255,255,0.9);
  --shadow:0 4px 20px rgba(0,0,0,0.08);
  --transition:all 0.3s ease;
}

header {
  background: var(--header-bg);
  backdrop-filter: blur(10px);
  padding: 1rem 2rem;
  box-shadow: var(--shadow);
  position: sticky;
  top: 0;
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-size:1.4rem;
  font-weight:700;
  color:var(--primary);
  text-decoration:none;
  display:flex;
  align-items:center;
  gap:.5rem;
}

nav ul {
  list-style:none;
  display:flex;
  gap:2rem;
}
nav a {
  text-decoration:none;
  color:var(--dark);
  font-weight:600;
  position:relative;
  padding:.5rem 0;
  transition:var(--transition);
}
nav a:after {
  content:'';
  position:absolute; bottom:0; left:0;
  width:0; height:3px;
  background:var(--accent);
  border-radius:3px;
  transition:var(--transition);
}
nav a:hover { color:var(--primary); }
nav a:hover:after { width:100%; }

.menu-toggle {
  display:none;
  background:none;
  border:none;
  font-size:1.8rem;
  cursor:pointer;
  color:var(--primary);
}

/* Responsive nav */
@media(max-width:768px){
  nav {
    position:absolute; top:70px; right:0;
    background:var(--header-bg);
    border-radius:12px;
    box-shadow:var(--shadow);
    width:200px;
    transform:translateX(110%);
    transition:var(--transition);
  }
  nav.active { transform:translateX(0); }
  nav ul { flex-direction:column; gap:1rem; padding:1rem; }
  .menu-toggle { display:block; }
}

/* Map */
#map { height: calc(100vh - 70px); width:100%; }

/* Legend */
.legend { background:white; padding:10px; border-radius:5px; box-shadow:0 2px 8px rgba(0,0,0,0.2); font-size:12px; }
.legend h4 { margin:0 0 8px; font-size:14px; }
.legend div { display:flex; align-items:center; margin-bottom:5px; }
.legend i { width:12px; height:12px; border-radius:50%; margin-right:5px; display:inline-block; }

/* Popup styling */
.leaflet-popup-content-wrapper { background:#fff; border-radius:16px; box-shadow:0 15px 35px rgba(0,0,0,0.2); }
.leaflet-popup-content { margin:0; padding:0; width:360px !important; font-family:'Poppins',sans-serif; }
.popup-card { padding:0; }
.popup-header { background:linear-gradient(135deg,#3498db 0%,#2c3e50 100%); color:white; padding:18px; }
.popup-title { font-size:1.2em; font-weight:600; display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
.popup-category { background:rgba(255,255,255,0.25); padding:4px 10px; border-radius:12px; font-size:.8em; }
.popup-user { font-size:.9em; opacity:.9; }
.popup-user::before { content:"ðŸ‘¤ "; }

.popup-content { padding:18px; }
.popup-detail { margin:10px 0; display:flex; }
.popup-label { font-weight:600; color:#555; min-width:90px; font-size:.9em; }
.popup-value { color:#333; flex:1; font-size:.9em; }

.status-badge { padding:4px 10px; border-radius:20px; font-size:.75em; font-weight:600; text-transform:uppercase; }
.status-pending { background:#ffeaa7; color:#e17055; }
.status-ongoing { background:#81ecec; color:#00cec9; }
.status-completed { background:#55efc4; color:#00b894; }

/* Images */
.image-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:8px; }
.image-wrapper { background:#f8f9fa; border-radius:10px; padding:10px; min-height:120px; display:flex; align-items:center; justify-content:center; border:1px solid #e9ecef; }
.img-loading { color:#6c757d; font-size:.85em; font-style:italic; }
.popup-img { max-width:100%; border-radius:8px; display:block; }

/* Form */
.popup-form { margin-top:15px; padding-top:15px; border-top:1px solid #e9ecef; }
.popup-form-title { font-weight:600; margin-bottom:8px; }
.popup-form form { display:flex; flex-direction:column; gap:10px; }
.form-group { display:flex; flex-direction:column; gap:6px; }
.popup-form input, .popup-form select { padding:8px; border:1px solid #ced4da; border-radius:8px; font-family:'Poppins',sans-serif; }
.popup-form button { padding:10px; border:none; border-radius:8px; background:linear-gradient(135deg,#3498db,#2c3e50); color:white; font-weight:600; cursor:pointer; }
.popup-form button:hover { opacity:.9; }

/* Marker */
.custom-marker { border:3px solid white; border-radius:50%; box-shadow:0 2px 6px rgba(0,0,0,0.3); }

/* Responsive */
@media(max-width:768px){
  .leaflet-popup-content { width:300px !important; }
  .image-grid { grid-template-columns:1fr; }
}
@media(max-width:480px){
  .leaflet-popup-content { width:260px !important; }
}